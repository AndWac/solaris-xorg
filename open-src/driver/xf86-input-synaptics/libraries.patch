From 36e34cd7e3b1c4939a35fb9fd97fc1b4b964d310 Mon Sep 17 00:00:00 2001
From: Alan Coopersmith <alan.coopersmith@oracle.com>
Date: Fri, 25 May 2012 14:51:55 -0700
Subject: [PATCH:xf86-input-synaptics] Link with modules needed to build with
 no-undefined linking

Signed-off-by: Alan Coopersmith <alan.coopersmith@oracle.com>
---
 src/Makefile.am |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/src/Makefile.am b/src/Makefile.am
index 5443094..c6ed55d 100644
--- a/src/Makefile.am
+++ b/src/Makefile.am
@@ -26,6 +26,7 @@
 # TODO: -nostdlib/-Bstatic/-lgcc platform magic, not installing the .a, etc.
 synaptics_drv_la_LTLIBRARIES = synaptics_drv.la
 synaptics_drv_la_LDFLAGS = -module -avoid-version
+synaptics_drv_la_LIBADD = $(XORG_LIBS)
 synaptics_drv_ladir = @inputdir@
 
 AM_CPPFLAGS = -I$(top_srcdir)/include
@@ -47,7 +48,7 @@ endif
 if BUILD_EVENTCOMM
 synaptics_drv_la_SOURCES += \
 	eventcomm.c eventcomm.h
-synaptics_drv_la_LIBADD = \
+synaptics_drv_la_LIBADD += \
 	$(MTDEV_LIBS)
 endif
 
-- 
1.7.9.2

